<!DOCTYPE html>
<head>
<meta charset="utf-8">
<title>Адекватная установка Python</title>
<link rel="stylesheet" href="../css/base.css">
<style>
  /* Таблица "Различия способов установки" */
  #t1 .col {
    width: 22%;
  }
</style>
</head>

<body>
  <header>
    <p>Автор: Федор Андреевич Лянгузов, <a href="mailto:Fedor.Lyanguzov@ya.ru">&lt;Fedor.Lyanguzov@ya.ru&gt;</a>.</p>
    <p>Дата: апрель 2017.</p>
  </header>
  <main>
    <h1>Преамбула</h1>
    <p>В этом документе представлен один из способов установки интерпретатора языка программирования <code>Python</code> на домашний компьютер с использованием прав администратора. Способ будет хорошо работать с <code>Python 3.6</code>. Все вопросы направляйте на электронную почту.</p>
    <p>Необходимые условия:</p>
    <ul>
      <li>Компьютер</li>
      <li>Свободное место на жестком диске: не менее 250 мегабайт</li>
      <li>Операционная система: Windows 7 или новее</li>
      <li>Права администратора</li>
      <li>Доступ в интернет</li>
      <li>Браузер</li>
    </ul>
    
    <section>
    <h1>Установка Python</h1>
    <h2>Вопрос: Для всех пользователей или для текущего пользователя?</h2>
      <p><code>Python</code> может быть установлен тремя различными способами: для текущего пользователя, для всех пользователей компьютера, без полной установки. Какой способ подойдет для разработки на домашнем компьютере?</p>
      <table id="t1">
        <caption>Различия способов установки</caption>
        <col class="col-head">
        <col class="col" span="3">
        <thead>
          <tr><th>Критерий</th><th>Для текущего пользователя</th><th>Для всех пользователей</th><th>Без полной установки</th></tr>
        </thead>
        <tbody>
        <tr><th>Права администратора</th>
        <td>нет</td>
        <td>да</td>
        <td>нет</td>
        </tr>
        <tr><th>Работает у других пользователей этого компьютера?</th>
        <td>нет</td>
        <td>да</td>
        <td>с трудом</td>
        </tr>
        <tr><th>Путь установки</th>
        <td><code>C:\Users\%user%\AppData\Local\Programs\Python\Python36-*</code></td>
        <td><code>C:\Program Files\Python36</code> или <code>C:\Program Files (x86)\Python36</code></td>
        <td>куда угодно, хоть на флешку</td>
        </tr>
        <tr><th>Запуск <code>Python</code> из командной строки</th>
        <td>да</td>
        <td>да</td>
        <td>с трудом</td>
        </tr>
        <tr><th>Запуск <code>pip</code> из командной строки</th>
        <td>с трудом</td>
        <td>да</td>
        <td>врядли</td>
        </tr>
        <tr><th>Применение</th>
        <td>Написание программ, некоторые функции труднодоступны</td>
        <td>Написание программ, все функции легкодоступны</td>
        <td>Распространение программ, требует отдельного описания</td>
        </tr>
        </tbody>
      </table>
      <p><em>Примечание:</em> <code>pip</code> - программа для установки дополнительных пакетов(программ или библиотек) для <code>Python</code>.</p>
      <p>Можно сделать вывод, что для наибольшего удобства разработки следует использовать второй вариант установки. Третий вариант будет интересен в момент <em>релиза</em> - выпуска программы в общий доступ и распространения. Однако к нему стоит обратиться гораздо позже, так как он значительно сложнее в настройке. Стоит также отметить, что существуют программы, облегчающие релиз.</p>
    <h2>Шаг 1: Скачать Python</h2>
      <p>Скачать <code>Python 3.6</code> можно по ссылке <a href="https://www.python.org/ftp/python/3.6.1/python-3.6.1.exe">https://www.python.org/ftp/python/3.6.1/python-3.6.1.exe</a>.</p>
    <h2>Шаг 2: Скачать unattend.xml</h2>
      <p><code>unattend.xml</code> - файл с настройками установки, специально подготовленный для этой инструкции. Его нужно положить в ту же папку, что и скачанный установщик. Скачать его можно по ссылке <a href="https://drive.google.com/open?id=0B_UDbco4kunlU1lVQlh2V3NwNVE">https://drive.google.com/open?id=0B_UDbco4kunlU1lVQlh2V3NwNVE</a>.</p>
    <h2>Шаг 3: Запустить установку</h2>
      <ol>
        <li>Запустить установочный файл.</li>
        <li>Разрешить ему запуститься, даже если он был скачан из интернета.</li>
        <li>Проверить, что внешний вид соответствует картинке:</li>
        <figure>
          <img src="./img/installator.png" alt="Картинка: Скриншот установщика">
          <figcaption>Скриншот установщика</figcaption>
        </figure>
        <li>Нажать кнопку <kbd>Install</kbd>.</li>
        <li>Разрешить установщику работать с правами администратора.</li>
        <li>Дождаться завершения, закрыть окно установщика.</li>
      </ol>
    </section>
    
    <section>
    <h1>Проверка установки</h1>
    <p>После установки чего угодно обязательно нужно проверять корректность установки.</p>
    <h2>Шаг 1: Проверка установки Python</h2>
    <ol>
      <li>Нажать <kbd>Win</kbd>+<kbd>R</kbd>.</li>
      <li>В появившемся окне набрать <code>cmd</code> и нажать <kbd>Enter</kbd>.</li>
      <li>В окне <em>командной строки</em> набрать <code>python --version</code> и нажать <kbd>Enter</kbd>. Таким образом будет дана <em>команда</em> <code>python</code> с <em>аргументом</em> <code>--version</code>. Результат должен быть примерно таким:</li>
      <figure>
        <img src="./img/cmd_python.png" alt="Картинка: Результат проверки Python">
        <figcaption>Результат проверки Python</figcaption>
      </figure>
      <li>Дать команду <code>exit</code> или закрыть окно крестиком.</li>
    </ol>
    <em>Примечание:</em> Результатом работы команды является весь текст(или отсутсвие его) между <em>запросами команд</em>(<code>C:\Users\Fedor&gt;</code> на картинке).
    <h2>Шаг 2: Проверка работы pip</h2>
    <ol>
      <li>Нажать <kbd>Win</kbd>+<kbd>R</kbd>.</li>
      <li>В появившемся окне набрать <code>cmd</code> и нажать <kbd>Enter</kbd>.</li>
      <li>Дать команду <code>pip --version</code>. Результат должен быть примерно таким:</li>
      <figure>
        <img src="./img/cmd_pip.png" alt="Картинка: Результат проверки pip">
        <figcaption>Результат проверки pip</figcaption>
      </figure>
      <li>Дать команду <code>exit</code> или закрыть окно крестиком.</li>
    </ol>
    <h2>Шаг 3: Проверка работы IDLE</h2>
    <p><code>IDLE</code> - интегрированная среда разработки(<abbr title="Integrated Development Environment">IDE</abbr>) на языке <code>Python</code>, написанная на <code>Python</code> с использованием библиотеки <code>tkInter</code>. Отличается от обычного блокнота следующими возможностями:</p>
    <ul>
      <li>Встроенный интерпретатор</li>
      <li>Запуск программ</li>
      <li>Подсветка синтаксиса</li>
      <li>Управление отступами</li>
      <li>Автодополнение кода</li>
      <li>Подсказки по коду</li>
      <li>Создание точек остановки(<code>breakpoint</code>) для отладки кода</li>
      <li>Изменение размера шрифта</li>
    </ul>
    <p>Как проверить корректность установки:</p>
    <ol>
      <li>Открыть меню "Пуск".</li>
      <li>В поиске набрать <code>IDLE</code>.</li>
      <li>Нажать <kbd>Enter</kbd>.</li>
      <li>Откроется окно <em>командного режима</em> IDLE:</li>
      <figure>
        <img src="./img/idle_window.png" alt="Картинка: Окно программы IDLE">
        <figcaption>Окно программы IDLE</figcaption>
      </figure>
      <li>В этом режиме можно давать команды на языке <code>Python</code>. Для выхода дать команду <code>exit()</code> или закрыть программу крестиком.</li>
    </ol>
    </section>
    
    <section>
    <h1>Удаление Python</h1>
    <p>Надо не только уметь устанавливать, но и удалять программы корректно. Чтобы удалить <code>Python</code>, <code>pip</code>, <code>IDLE</code> и все дополнительные пакеты нужно:</p>
    <ol>
      <li>Открыть "Панель управления".</li>
      <li>Перейти в раздел "Программы и компоненты".</li>
      <li>Найти <code>Python 3.6.1 (32-bit)</code>, нажать <kbd>Удалить/Изменить</kbd>, в появившемся меню выбрать <kbd>Uninstall</kbd>, далее следовать инструкциям на экране.</li>
      <li>В разделе "Программы и компоненты" найти <code>Python Launcher</code>, нажать <kbd>Удалить</kbd>, следовать инструкциям.</li>
    </ol>
    <p><em>Примечание:</em> для полного удаления <em>обязательно</em> удалять <code>Python Launcher</code>.</p>
    <p><em>Примечание:</em> удаление <code>Python</code> удалит также все дополнительные пакеты, установленные <em>для этой версии языка</em>.</p>
    </section>
    <section>
    <h1>Установка дополнительных модулей из интернета</h1>
    <p>На сайте <a href="https://pypi.python.org/pypi">https://pypi.python.org/pypi</a> доступны для загрузки более 100 000 пакетов с открытым исходным кодом на языке <code>Python</code>. Они являются не только прекрасным материалом для самостоятельного изучения и усиления навыка программирования, но и хорошим подспорьем при создании своих собственных проектов практически в любой сфере. Например:</p>
    <ul>
      <li><code>Panda3d</code> - <em>фреймворк</em>, набор <em>компонентов</em>(больших, чем функции) и <em>утилит</em>(маленьких программ) для построения трехмерных игр и симуляций.</li>
      <li><code>Cocos2d</code> - высокоуровневый фреймворк для построения двумерных игр.</li>
      <li><code>pygame</code> - низкоуровневый фреймворк для построения двумерных игр.</li>
      <li><code>django</code> - <em>огромный</em>, как сам <code>Python</code>, фреймворк для построения сайтов.</li>
      <li><code>flask</code> - в противоположность, маленький и легкий фреймворк для построения сайтов.</li>
      <li><code>selenium</code> - фреймворк для автоматизации работы в интернете.</li>
      <li><code>cryptography</code> - <em>библиотека</em>(набор функций) для шифрования.</li>
      <li><code>Pillow</code> - библиотека для автоматизации работы с изображениями.</li>
      <li><code>Sphinx</code> - фреймворк для построения сайтов с документацией(да, да, знаю, документация не нужна).</li>
      <li><code>oauthlib</code> - библиотека для авторизации в интернете, чтобы затем обращаться к сайтам.</li>
      <li><code>google-api-python-client</code> - библиотека для работы с Google-сервисами.</li>
      <li><code>scipy</code> - <em>громадная</em> библиотека для физических рассчетов(нахождение интегралов, решение дифференциальных уравнений).</li>
      <li><code>matplotlib</code> - библиотека для рисования графиков(даже анимированных...)</li>
      <li><code>poliastro</code> - библиотка для построения орбит тел(планет, спутников естественных и искусственных) в солнечной системе с использованием данных из NASA.</li>
      <li><code>PyQt5</code> - <em>привязка</em>(библиотека для <code>Python</code>, использующая библиотеку на другом языке, или интернет сервис) к самому популярному открытому фремворку для построения пользовательского интерфейса QT.</li>
      <li><code>vk</code> - привязка к vk.com.</li>
      <li>и многие другие...</li>
    </ul>
    <h2>Вопрос: Для всех пользователей или для текущего пользователя?</h2>
      <p>Установив <code>Python</code> для всех пользователей может показаться, что устанавливать дополнительные пакеты тоже нужно устанавливать для всех пользователей(и с правами администратора). Однако это не так. <code>Python</code> и его стандартные библиотеки проходят строгий контроль качества перед релизом. С большой вероятностью в них не содержится критических ошибок, открывающих уязвимости в операционной системе. Даже если такие ошибки и попадаются, они очень быстро исправляются. Этого нельзя сказать о пакетах из <code>PyPI</code>. Никто, кроме авторов пакета, не несет ответственности как за работоспособность, так и за безопасность пакета. Недобросовестные авторы могут встраивать вредоносный код в установщик пакета, заражая операционную систему во время установки с правами администратора. Для заражения практически всегда необходимы права администратора, поэтому установка пакетов <em>без прав администратора</em> является хорошей превентивной мерой для обеспечения безопасности компьютера. Поэтому в этом мануале нет инструкций для установки пакетов с правами администратора. Единственный способ полностью обезопасить себя - прочитать исходный код пакета. Это возможно, но достаточно трудоемко.</p>
    <h2>Установка пакета из PyPI</h2>
    <ol>
      <li>Открыть командную строку(<code>cmd</code>).</li>
      <li>Дать команду <code>pip install --user <em>имя_пакета</em></code>.</li>
      <li>Убедиться, что в результате команды нет красных строчек и результат заканчивается на <code>Successfully installed <em>имя_пакета</em></code>.</li>
      <li>Если это не так:
        <ol>
        <li>Убедиться в наличии доступа к интернету.</li>
        <li>Убедиться в правильности написания имени пакета.</li>
        <li>Убедиться в совместимости вашей версии <code>Python</code> с пакетом на сайте <code>PyPI</code>.</li>
        <li>Попробовать найти другой пакет со схожей функциональностью.</li>
        <li>Подумать, стоит ли пробовать устанавливать пакет от имени администратора(практически всегда <em>нет</em>).</li>
        <li>Установить пакет от имени администратора.</li>
        <li>Если все это не помогло - плакать.</li>
        </ol>
      </li>
    </ol>
    <p><em>Примечание:</em> если забыть написать агрумент <code>--user</code>, ничего страшного не случится, пакет просто не установится. Следует продолжить установку с пункта 2.</p>
    <h2>Проверка корректности установки пакета</h2>
    <ol>
      <li>Открыть командную строку.</li>
      <li>Дать команду <code>python -c "import <em>имя_пакета</em>"</code>.</li>
      <li>Убедиться в отсутствии слов <code>Error</code> и <code>Exception</code> в результате команды. Пустой результат с высокой вероятностью означает корретктную установку.</li>
    </ol>
    <h2>Удаление пакета</h2>
    <ol>
      <li>Открыть командную строку.</li>
      <li>Дать команду <code>pip uninstall <em>имя_пакета</em></code>.</li>
      <li>Подтвердить удаление.</li>
      <li>Убедиться, что в конце результата команды есть <code>Successfully uninstalled <em>имя_пакета</em></code>.</li>
    </ol>
    </section>
  </main>
</body>